<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>dtdtree 1.2.0</title>
</head>
<body>
<!-- =================================================================== -->
<hr>
<h1>dtdtree</h1>
<p><code>dtdtree</code> outputs the content hierarchy tree
(in ASCII) of SGML elements defined in a DTD.
</p>
<!-- =================================================================== -->
<hr>
<h2><a name="usage">Usage</a></h2>
<p><code>dtdtree</code> is invoked from the command-line as follows:
</p>
<p><tt>% dtdtree </tt><var>[options]</var><tt> </tt><var>elementname</var>
<var>elementname</var> ...
</p>
<p>Any strings after, and not part of, command-line options are treated
as the elements (<var>elementname</var>) to output trees for.
If no elements are
specified, than the tree(s) for the top-most element(s) defined in the
DTD are printed.
</p>
<p>The following are the list of options available:
</p>
<dl>
<dt><a name="-dtd"><code>-dtd </code><var>filename</var></a></dt>
<dd><p>Use <var>filename</var> as the SGML DTD to parse. Otherwise, read from
standard in.
</p>
</dd>
<dt><a name="-help"><code>-help</code></a></dt>
<dd><p>Print a brief usage description. No other action is performed.
</p>
</dd>
<dt><a name="-level"><code>-level </code><var>#</var></a></dt>
<dd><p>Set the prune level of the content hierachy tree to
<var>#</var> Defaults to 15.
</p>
</dd>
<dt><a name="-mapfile"><code>-mapfile</code> <var>filename</var></a></dt>
<dd><p>Use <var>filename</var> as the file for mapping public
identifiers and external entities to system files.  The default is
"<code>map.txt</code>".  See
<a href="#resolving">Resolving External Entities</a> for more
information.
</p>
</dd>
<dt><a name="-treefile"><code>-treefile </code><var>filename</var></a></dt>
<dd><p>Output element content tree(s) to <var>filename</var>.
Otherwise, <code>dtdtree</code> prints to standard out.
</p>
</dd>
<dt><a name="-verbose"><code>-verbose</code></a></dt>
<dd><p>Ouput to standard error messages of what <code>dtdtree</code> is doing.
This option
is mainly for debugging purposes.
</p>
</dd>
</dl>
<!-- =================================================================== -->
<hr>
<h2><a name="output">dtdtree Output</a></h2>
<p>The output generated by <code>dtdtree</code> is as follows:
</p>
<p>Elements that exist at a higher (or equal) level, or if the maximum
depth has been reached, are pruned.  The string "..." is appended to
an element if it has been pruned due to pre-existance at a higher
(or equal) level.  The content of the pruned element can be determined
by searching for the 
complete tree of the element (ie. elements w/o "...").
</p>
<p>Since the tree outputed is static, the inclusion and exclusion sets of
elements are treated specially. Inclusion and exclusion elements
inherited from ancestors are not propagated down to determine
what elements are printed, but special markup is presented at a
given element if there exists inclusion and exclusion elements from
ancestors. The reason inclusion and exclusion elements are not
propagated down is because of the pruning done. An element w/o "..."
may be the only place of reference to see the content hierarchy of
that element. However, the element may occur in multiple contents
and have different ancestoral inclusion and exclusion elements
applied to it. 
</p>
<p>Have I lost you? Maybe an example may help:</p>
<pre>
     OPENBOOK
     |
     |_d1
     |  | (I): idx needbegin needend newline
     |  |
     |  |_abbrev
     |  |  | (Ia): idx needbegin needend newline
     |  |  | (X): needbegin needend
     |  |  |
     |  |  |_#PCDATA
     |  |  |_acro
     |  |  |  | (Ia): idx needbegin needend newline
     |  |  |  | (Xa): needbegin needend
     |  |  |  |
     |  |  |  |_#PCDATA
     |  |  |  |_sub ...
     |  |  |  |_super ...
     |  |  | 
</pre>
<p>Ignoring the lines starting with ()'s, one gets the content hierachy
of an element as defined by the DTD without concern of where it
may occur in the overall structure. The ()'s line give additional
information regarding the element with respect to its existance
within a specific context. For example, when an acro element
occurs within <code>openbook</code>/<code>d1</code>/<code>abbrev</code>,
along with its normal
content, it can contain <code>idx</code> and <code>newline</code>
elements due to
inclusions from ancestors. However, it cannot contain <code>needbegin</code>,
<code>needend</code> regardless of its defined content since an ancestor(s)
excludes them.
</p>
<dl>
<dt>NOTE</dt>
<dd>Exclusions override inclusions. If an element occurs in an
inclusion set and an exclusion set, the exclusion takes
precedence. Therefore, in the above example, <code>needbegin</code>, 
<code>needend</code> are excluded from <code>acro</code>.</dd>
</dl>
<p>Explanation of ()'s keys:
</p>
<dl>
<dt><code>(I)</code></dt>
<dd>The list of inclusion elements defined by the current element.
Since this is part of the content model of the element, the
inclusion elements are printed as part of the content
hierarchy of the current element.
</dd>
<dt><code>(Ia)</code></dt>
<dd>The list of inclusion elements due to ancestors. This is listed
as reference to determine the content of an element within a
given context. None of the ancestoral inclusion elements are
printed as part of the content hierarchy of the element. 
</dd>
<dt><code>(X)</code></dt>
<dd>The list of exclusion elements defined by the current
element. Since this is part of the content model of the
element, the exclusion elements prevent elements defined in
the base content and inclusion sets to be printed.
</dd>
<dt><code>(Xa)</code></dt>
<dd>The list of exclusion elements due to ancestors. This is listed
as reference to determine the content of an element within a
given context. None of the ancestoral exclusion elements
have any effect on the printing of the content hierarchy of
the current element.
</dd>
</dl>
<!-- =================================================================== -->
<hr>
<h2><a name="resolving">Resolving External Entities</a></h2>
<p><code>dtdtree</code> provides the capability of resolving
external entities to system files via the
<a href="#-mapfile"><code>-mapfile</code></a>
command-line option.
The map file, or <em>catalog</em>,
provides you with the capability of mapping public
identifiers to system identifiers (files) or to map entity names to
system identifiers.
<dl>
<dt><strong>Note</strong></dt>
<dd>The term "map file" was introduced by the first version of
<code>dtdtree</code>. However, since version 1.2.0, the "map file"
format has changed to following similiar conventions of SGML catalogs
(as defined in
<cite>SGML Open Draft Technical Resolution 9401:1994</cite>).
Therefore,
the term "map file" and "catalog" are the same in the context of this
document.
</dd>
</dl>

<h3>Catalog Syntax</h3>
<p>A catalog contains a sequence of the following types of entries:
</p>
<dl>
<dt><code>PUBLIC</code> <var>public_id</var> <var>system_id</var></dt>
<dd><p>This maps <var>public_id</var> to <var>system_id</var>.
</p>
</dd>
<dt><code>ENTITY</code> <var>name</var> <var>system_id</var></dt>
<dd><p>This maps a general entity whose name is <var>name</var> to
<var>system_id</var>.
</p>
</dd>
<dt><code>ENTITY %</code><var>name</var> <var>system_id</var></dt>
<dd><p>This maps a parameter entity whose name is <var>name</var> to
<var>system_id</var>.
</p>
</dd>
</dl>
<h4>Syntax Notes</h4>
<ul>
<li><p>A <var>system_id</var> string cannot contain any spaces.  The
<var>system_id</var> is treated as pathname of file. </p>
</li>
<li><p>Any line in a catalog file that does not follow the previously
mentioned entries is ignored.</p>
</li>
<li><p>In case of duplicate entries, the first entry defined is used.
</ul>
<p>Example catalog file:</p>
<pre>
        -- ISO public identifiers --
PUBLIC "ISO 8879-1986//ENTITIES General Technical//EN"            iso-tech.ent
PUBLIC "ISO 8879-1986//ENTITIES Publishing//EN"                   iso-pub.ent
PUBLIC "ISO 8879-1986//ENTITIES Numeric and Special Graphic//EN"  iso-num.ent
PUBLIC "ISO 8879-1986//ENTITIES Greek Letters//EN"                iso-grk1.ent
PUBLIC "ISO 8879-1986//ENTITIES Diacritical Marks//EN"            iso-dia.ent
PUBLIC "ISO 8879-1986//ENTITIES Added Latin 1//EN"                iso-lat1.ent
PUBLIC "ISO 8879-1986//ENTITIES Greek Symbols//EN"                iso-grk3.ent 
PUBLIC "ISO 8879-1986//ENTITIES Added Latin 2//EN"                ISOlat2
PUBLIC "ISO 8879-1986//ENTITIES Added Math Symbols: Ordinary//EN" ISOamso

        -- HTML public identifiers and entities --
PUBLIC "-//IETF//DTD HTML//EN"                                    html.dtd
PUBLIC "ISO 8879-1986//ENTITIES Added Latin 1//EN//HTML"          ISOlat1.ent
ENTITY "%html-0"                                                  html-0.dtd
ENTITY "%html-1"                                                  html-1.dtd

</pre>

<h3>Environment Variables</h3>
<p><code>dtdtree</code> also supports envariables (ie. environment
variables) to aid in resolving external entities.  The following
envariables are used by <code>dtdtree</code>:
<dl>
<dt>P_SGML_PATH</dt>
<dd><p>This is a colon (semi-colon for MSDOS users)
separated list of paths for finding catalog files
or system identifiers.  For example, if a system identifier is not
an absolute pathname, then the paths listed in P_SGML_PATH are used to
find the file.
</p>
</dd>
<dt>SGML_CATALOG_FILES</dt>
<dd><p>This envariable is a colon (semi-colon for MSDOS users)
separated list of catalog files to read.
The file specified by
<a href="#-mapfile"><code>-mapfile</code></a>
is read first before any files specified by SGML_CATALOG_FILES.  If
a file in the list is not an absolute path, then file is searched in
the paths listed in the P_SGML_PATH and SGML_SEARCH_PATH.
</p>
</dd>
<dt>SGML_SEARCH_PATH</dt>
<dd><p>This is a colon (semi-colon for MSDOS users)
separated list of paths for finding catalog files
or system identifiers.  This envariable serves the same function as
P_SGML_PATH.  If both are defined, paths listed in P_SGML_PATH are
searched first before any paths in SGML_SEARCH_PATH.</p>
</dd>
</dl>
<p>The use of P_SGML_PATH is for compatibility with earlier versions
of <code>dtdtree</code>.  SGML_CATALOG_FILES and SGML_SEARCH_PATH
are supported for compatibility with James Clark's <code>nsgmls(1)</code>.
</p>
<dl>
<dt><strong>Note</strong></dt>
<dd>When searching for a file via the P_SGML_PATH and/or SGML_SEARCH_PATH,
if the file is not found in any of the paths, then the current working
directory is searched.
</dd>
</dl>
<!-- =================================================================== -->
<hr>
<h2><a name="availability">Availability</a></h2>
<p>This program is part of the <em>perlSGML</em> package; see
&lt;URL:<a href="http://www.oac.uci.edu/indiv/ehood/perlSGML.html"
>http://www.oac.uci.edu/indiv/ehood/perlSGML.html</a>&gt;
</p>
<!-- =================================================================== -->
<hr>
<h2><a name="author">Author</a></h2>
<address>
<a href="http://www.oac.uci.edu/indiv/ehood/">Earl Hood</a>
&lt;<a href="mailto:ehood@convex.com">ehood@convex.com</a>&gt;<br>
<a href="http://www.convex.com">CONVEX Computer Corporation</a><br>
3000 Waterview Parkway<br>
P.O. Box 833851<br>
Richardson, TX  75083-3851<br>
<br>
Phone: (214) 497-4387<br>
FAX: (214) 497-4500<br>
</address>
<!-- =================================================================== -->
<hr>
<address>
dtdtree 1.2.0<br>
</address>
</body>
</html>
